\input{../common/config}

\title{Terminology and General Requirements for Simulation}

\begin{document}

\startslides

\begin{frame}{On the previous lecture:}
Simulators:
\begin{itemize}
\item Reduced time to market for new computer systems,
\item Increased developer's efficiency,
\item Helped to establish software and hardware co-development.
\end{itemize}
\end{frame}

\begin{frame}{Questions}
\begin{itemize}
\item What is an application level functional simulator?\pause
\item What is the difference between simulation, emulation and virtualization?\pause
\item Why software and hardware need to be developed together?
\end{itemize}
\end{frame}

\section{Requirements}

\begin{frame}{Requirements to Simulation Solutions}
\begin{itemize}
\item Accuracy,
\item Speed,
\item Compatibility.
\end{itemize}
\end{frame}

\section{Accuracy}

\begin{frame}{Accuracy}
\begin{flushright}
\tiny{Essentially, all models are wrong, but some are useful. \textit{G. E. P. Box, N. R. Draper}}
\end{flushright}
\vfill
\begin{itemize}
\item A model should be accurate enough to fulfill the assigned tasks.
\item Extra accuracy --- lower simulation speed, longer development, more errors.
\vfill
\end{itemize}
\end{frame}

\begin{frame}{Where to Get Data for Model Creation?}
\begin{itemize}
\item Specification and documentation. \textit{For example}: Intel SDM, EAS, BWG\dots
\item Existing models + specification.
\item Reverse engineering.
\end{itemize}
\end{frame}

\begin{frame}{How to check Model Correctness?}
\begin{itemize}
\item Functional correctness,
\item Reasonable results,
\item Compare with other model of the same device,
\item Compare with real hardware.
\end{itemize}
\end{frame}

\begin{frame}{How to \textit{Prove} Model Correctness?}
\begin{itemize}
\item Formal verification,
\item Not always possible,
\item Huge number of possible states. \textit{For example}: x86 instruction
  length is up to 15 bytes $\Rightarrow$ up to $2^{120}$  possible input values.
\end{itemize}
\end{frame}

\section{Speed}

\begin{frame}{Speed}
\begin{itemize}
\item MIPS --- Million \textit{guest} Instruction Per \textit{host} Second.
\item MHz --- number of \textit{guest} cycles per \textit{host} second.
\end{itemize}
\end{frame}

\begin{frame}{Speed as Slowdown}
Slowdown --- comparisson with a similar physical system that executes the same
workload.

\begin{equation*}
\centering
Slowdown = T_{guest}/T_{host}
\end{equation*}

\vfill

\begin{itemize}
\item Physical system is required for comparisson.
\item Special case: guest system matches host.
\item Usually guest systems slower than host, i.e. slowdown > 1.
\end{itemize}
\end{frame}

\begin{frame}{Typical Slowdown for Different Simulator Types}
\begin{tabular}{rl}
\textbf{Model Type}                      & \textbf{Slowdown} \\
Functional through hardware acceleration & $1$\dots$5$ \\
Functional through binary translation    & $10$\dots$100$ \\
Functional through interpretation        & $100$\dots$10^3$ \\
Cycle-accurate                           & $10^4$\dots$10^6$ \\
\end{tabular}
\end{frame}

\begin{frame}{How to Improve Simulation Speed?}
\begin{itemize}
\item It's a main topic for the next lectures:
\begin{itemize}
\item Effective simulation for busy waiting,
\item Hardware acceleration,
\item Parallel execution,
\item Lazy flag evaluation,
\item And many more\dots
\end{itemize}
\end{itemize}
\end{frame}

\section{Compatibility}

\begin{frame}{Compatibility}
\begin{itemize}
\item Debuggers, IDE, tracer and trace analyzers.
\item File formats: disk images, memory images, traces.
\item Automation and extensibility by dynamic programming languages: Perl,
  Python, Lua\dots
\item Automatic operation without human intervention: no GUI, regressions
  testing, longer experiments.
\end{itemize}
\end{frame}

\begin{frame}{Simulator structure}
\begin{itemize}
\item Simulator Core,
\item Command Line Interface,
\item Graphical Interface,
\item Script Interpreter,
\item Public API.
\end{itemize}
\end{frame}

\section*{Conclusions}

\begin{frame}{Conclusions}
\begin{itemize}
\item Accuracy,
\item Speed,
\item Extensibility.
\end{itemize}
\end{frame}

\begin{frame}[allowframebreaks]{Bibliography}
\begin{thebibliography}{99}
  \bibitem{} [RUS] \textit{Речистов~Г.С, Юлюгин~Е.А и др.},
    Программное моделирование вычислительных систем.
    \url{https://github.com/grigory-rechistov/simbook/blob/master/metoda/main-web.pdf}
  \bibitem{} \textit{James Smith, Ravi Nair}, Virtual machines -- Versatile
    Platforms for Systems and Processes.
\end{thebibliography}
\end{frame}

\begin{frame}{On the next lecture:}
Interpreters:
\begin{itemize}
\item Simplified pipeline,
\item Exceptions,
\item Optimizations,
\item Advantages and disadvantages.
\end{itemize}
\end{frame}

\finalslide

\end{document}
